# ESLint 및 Prettier 설정

- 팀 설정 적용

---

# 코드 스멜 찾기

## 문서 02번을 보기 전에, 느껴지는 코드 스멜 찾아보기

1. **전역 변수로 관리되는 값들**  
   → 전역 변수는 어디서 오염될지 파악하기 쉽지 않음

2. **통일되지 않은 변수 이름 컨벤션**

3. **응집성 부족**  
   → 딱 봤을 때 어디서 사용되는지 모르겠는 값/함수들

4. **절차지향적 프로그래밍**  
   → 그냥 쭉~ 나열되어 있음. 자바스크립트랑은 좀 안 맞지 않나?

5. **함수 추출이 안 되어 있음**

6. **띄어쓰기(들여쓰기)가 일관성 없음**

---

# 문서 02를 보며 리팩토링 계획 세우기

## 1. 변수 선언과 네이밍의 문제점

- **P. 문제**: 일관성 없는 변수 선언  
  **S. 해결**: `const`/`let`을 명확히 사용

- **P. 문제**: 변수명 의미 부족 / 줄임말 사용  
  **S. 해결**: 줄임말 지양, 형용사/접속사/전치사 활용해 맥락 표현
  - 상수: `UPPER_SNAKE_CASE`
  - 함수/변수: `camelCase`
  - 컴포넌트: `PascalCase`

- **P. 문제**: 전역 변수  
  **S. 해결**: 전역 변수 접근을 제한하고 getter/setter로 캡슐화 → 오염 방지

---

## 2. 함수 설계

- **P. 문제**: 과도하게 긴 함수  
  **S. 해결**: 단일 책임 원칙에 따라 함수 분리

- **P. 문제**: 함수 정의 위치가 불명확  
  **S. 해결**: 함수 표현식 + 화살표 함수 지향 → 선언 순서 명확히

---

## 3. 중복 코드 패턴

- **P. 문제**: 포인트 계산 중복  
  **S. 해결**: 함수로 분리

- **P. 문제**: 재고 체크 중복  
  **S. 해결**: 함수로 분리

- **P. 문제**: DOM 조작 중복  
  **S. 해결**: 함수로 분리

---

## 4. 매직 넘버와 하드코딩

- **P. 문제**: 매직 넘버 / 하드코딩된 할인율  
  **S. 해결**: 상수화 + 의미 있는 네이밍 + 주석 작성

---

## 5. 전역 상태 관리 문제

- **P. 문제**: 전역 변수 직접 조작  
  **S. 해결**: 1-3단계 리팩토링으로 함께 해결 예정

- **P. 문제**: 상태의 일관성 부재 (DOM 수량 vs prodList 재고)  
  **S. 해결**: 하나의 상태를 바라보도록 구조 통일

---

## 6. 비즈니스 로직과 UI 혼재

- **P. 문제**: 로직과 UI 코드가 뒤섞여 있음  
  **S. 해결**: 컨테이너-프레젠터 분리 고려

---

## 7. 에러 처리 부재

- **P. 문제**: null 체크, 예외 상황 처리 미흡  
  **S. 해결**: null/undefined 핸들링 추가

---

## 8. 불필요한 반복 계산

- **P. 문제**: 동일 계산 반복  
  **S. 해결**: 값 저장 → 재활용

- **P. 문제**: 비효율적인 DOM 조작  
  **S. 해결**: `innerHTML` 최소화, DOM 접근 최소화 고려

---

## 9. 일관성 없는 코딩 스타일

- **P. 문제**: 공백, 들여쓰기, 괄호, 문자열 표현 등 일관성 없음  
  **S. 해결**: Prettier 적용 (`.prettierrc` 규칙 준수)

---

## 10. 주석과 문서화

- **P. 문제**: 네이밍으로 충분한 부분에 불필요한 주석  
  **S. 해결**: 불필요한 주석 삭제

- **P. 문제**: 복잡한 로직에 주석 없음  
  **S. 해결**: 특수 로직에는 주석 추가

---

# 🛠 리팩토링 체크리스트

문서 02 기반 개선 항목을 중심으로 작성된 체크리스트입니다. 리팩토링 시 아래 항목들을 하나씩 확인하며 적용해주세요.

---

## ✅ 1. 변수 선언과 네이밍

- [x] `var` → `const` 또는 `let`으로 수정했는가?
- [ ] 줄임말 대신 의미 있는 이름을 사용했는가? (`cnt` → `count` 등)
- [ ] 네이밍 컨벤션이 일관적인가?
  - 상수: `UPPER_SNAKE_CASE`
  - 변수/함수: `camelCase`
  - 컴포넌트: `PascalCase`
- [ ] 전역 변수를 제거하거나 캡슐화(getter/setter)했는가?

---

## ✅ 2. 함수 구조 및 책임 분리

- [ ] 하나의 함수가 한 가지 일만 하도록 분리했는가?
- [ ] 중복된 코드를 함수로 추출했는가?
- [ ] `함수 표현식 + 화살표 함수` 형태로 선언 순서를 명확히 했는가?
- [ ] UI 코드와 비즈니스 로직이 혼재되어 있지 않은가? → 분리했는가?

---

## ✅ 3. 중복 코드 제거

- [ ] 포인트 계산, 재고 체크, DOM 조작 등의 중복 로직을 함수로 추출했는가?

---

## ✅ 4. 매직 넘버 / 하드코딩 제거

- [ ] 숫자 상수나 문자열 하드코딩을 제거하고 상수화했는가?
- [ ] 의미 있는 상수명으로 표현했는가?
- [ ] 특수 상수에는 주석을 추가했는가?

---

## ✅ 5. 상태 일관성 유지

- [ ] DOM 요소의 상태와 자바스크립트 상태 객체가 충돌하지 않는가?
- [ ] 하나의 source of truth로 상태를 일관되게 유지했는가?

---

## ✅ 6. 렌더링 성능 최적화

- [ ] 동일한 계산을 반복하고 있지 않은가? → 중복 계산 제거
- [ ] DOM 조작 (`innerHTML`, `querySelector` 등)을 최소화했는가?
- [ ] 불필요한 렌더링이 발생하지 않도록 개선했는가?

---

## ✅ 7. 에러 처리

- [ ] `null`, `undefined`, 예외 상황 등에 대한 방어 코드가 있는가?
- [ ] 사용자 입력 오류 등에 대한 처리가 있는가?

---

## ✅ 8. 코딩 스타일 & 포맷팅

- [ ] 들여쓰기, 띄어쓰기, 괄호 위치 등 스타일이 일관적인가?
- [ ] Prettier 설정이 적용되었는가? (`.prettierrc` 활용)
- [ ] 문자열 스타일(`'`, `"`, `` ` ``)이 통일되었는가?

---

## ✅ 9. 주석 정리

- [ ] 네이밍으로 충분히 의도 전달되는 주석은 제거했는가?
- [ ] 복잡한 로직에는 설명 주석을 추가했는가?

---

## 🔁 마무리 점검

- [ ] 함수/변수명만 봐도 코드의 흐름이 보이는가?
- [ ] 중복된 구조가 제거되어 깔끔해졌는가?
- [ ] 리팩토링 후 코드의 가독성이 개선되었는가?

---

# 리팩토링 의식의 흐름 정리

1. var를 let,const로 변경
2. 가장 작은 단위의 함수별로 리팩토링 진행
3. 리팩토링하다보니 productList를 관리하는 전역 상태를 추출하는 게 가장 시급해보임 -> productList를 관리하는 singleton을 만들자!
4. 뷰로직 부분 굉장히 거슬리는데, 당장 방법이 떠오르는 것이 없어 다른 부분 리팩토링 후 생각해보기로 함. 사실 react로 넘어가는게 심화과제이다 보니 뷰렌더러를 막 복잡하게 짤 필요는 없을 것 같지만.. 컴포넌트 분리 정도는 하는 게 좋을 것 같다.
5. product내부 필드의 키값 네이밍이 거슬리니 네이밍을 고치자
6. 뷰로직 부분을 먼저 분리하는 게 좋을 것 같아, 그 부분부터 고치려고 함
   1. 뷰 업데이트 되는 경우 : 장바구니 담았을 때, 수량 변경했을 때, 도움말 버튼 눌렀을 때
7. 생각되로 되진 않음 함수 단위 리팩토링으로 복귀
   1. main 부분 내부 로직 주석 + Array메서드 이용해서 가독성 높일 수 있는 부분은 높이기
   2. 장바구니 계산하는 부분 리팩토링하려고 시도 중. . . <-장바구니는 찐 전역 상태라서 얘부터 뽑아주는 게 좋겠다.
8. 그래서 장바구니를 추출
9. 장바구니 적용하기가 좀 무섭다; 일단 돌아가도록 기존값에도 신규값 할당해서 확인하는 식으로 진행하고, 기존 값에 @deprecated 달아두기(나중에 싹~ 지울거임.)
